<!DOCTYPE html>
<html lang="es" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.81.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Antes de analizar el código Blink en C, explicaremos la estructura básica de un programa en C, el siguiente código muestra un programa mínimo
#include&lt;bibliotecas.h&gt; int main(void) { tipo1 variable1; tipo\_n variable\_n; while(1){ hacer\_cosas(var1, var2, varn); } return 0; } Al inicio de este listado tenemos una directiva del preprocesador, las directivas comienzan con un #, en este caso tenemos una directiva include, que le indica al compilador que copie el contenido del fichero bibliotecas.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Programando Avr en C.- Hola mundo" />
<meta property="og:description" content="Antes de analizar el código Blink en C, explicaremos la estructura básica de un programa en C, el siguiente código muestra un programa mínimo
#include&lt;bibliotecas.h&gt; int main(void) { tipo1 variable1; tipo\_n variable\_n; while(1){ hacer\_cosas(var1, var2, varn); } return 0; } Al inicio de este listado tenemos una directiva del preprocesador, las directivas comienzan con un #, en este caso tenemos una directiva include, que le indica al compilador que copie el contenido del fichero bibliotecas." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-hola-mundo/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2019-06-06T21:11:38&#43;00:00" />
<meta property="article:modified_time" content="2019-06-06T21:11:38&#43;00:00" />

<title>Programando Avr en C.- Hola mundo | Blog sobre sistemas embebidos</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.2bc2364a4a4b31f0ec1debecf0a8f90a840821f143dfe1ac6a0f7cbcbdcf64ac.css" integrity="sha256-K8I2SkpLMfDsHevs8Kj5CoQIIfFD3&#43;Gsag98vL3PZKw=">
<script defer src="/es.search.min.fad7a5cc068e45d48fa915469b2048c84dc7c5e8ac6d661d9082be7e4c4cd199.js" integrity="sha256-&#43;telzAaORdSPqRVGmyBIyE3HxeisbWYdkIK&#43;fkxM0Zk="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Blog sobre sistemas embebidos</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Buscar" aria-label="Buscar" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6f6f484549ce2d8602f7989616e2f29f" class="toggle"  />
    <label for="section-6f6f484549ce2d8602f7989616e2f29f" class="flex justify-between">
      <a href="https://eleckia.000webhostapp.com/docs/workstation/" class="">Estación de trabajo.</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/arduino-basico-iii/" class="">Arduino Básico III</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/arduino-basico-ii-hola-mundo/" class="">Arduino Básico II.- Hola Mundo</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/arduino-basico-i/" class="">Arduino Básico I.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/estacion-de-trabajo-iv/" class="">Estación de trabajo IV</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/estacion-de-trabajo-iii/" class="">Estación de trabajo III</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/estacion-de-trabajo-ii/" class="">Estación de trabajo II</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/workstation/estacion-de-trabajo-i/" class="">Estación de trabajo I</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c5a8f28f5516b1587793df786fc2352d" class="toggle" checked />
    <label for="section-c5a8f28f5516b1587793df786fc2352d" class="flex justify-between">
      <a href="https://eleckia.000webhostapp.com/docs/avr/" class="">Programación Avr en C.</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-arreglos/" class="">Programando Avr en C. Arreglos.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-apuntadores-punteros-pointers-ii-apuntadores-dobles/" class="">Programando Avr en C.- Apuntadores, punteros, pointers III. Apuntadores Dobles.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-apuntadores-punteros-pointers-ii-apuntadores-a-funciones/" class="">Programando Avr en C.- Apuntadores, punteros, pointers II. Apuntadores a funciones.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-apuntadores-punteros-pointers/" class="">Programando Avr en C.- Apuntadores, punteros, pointers I.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-el-flujo-del-programa-if-else-if-else/" class="">Programando Avr en C.- El flujo del programa, if, else, if else.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-constantes/" class="">Programando Avr en C.- Constantes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-tipo-de-dato-booleano-operadores-booleanos-y-de-comparacion/" class="">Programando Avr en C.- Tipo de dato Booleano, operadores booleanos y de comparación.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-funciones/" class="">Programando Avr en C.- Funciones</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-variables-y-tipos-caracteres/" class="">Programando Avr en C.- Variables y tipos, caracteres.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-variables-y-tipos-enteros/" class="">Programando Avr en C.- Variables y tipos.- Enteros.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/avr/programando-avr-en-c-hola-mundo/" class=" active">Programando Avr en C.- Hola mundo</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Perifericos</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-32e0e2a16668b9d33b9df31ea5765d8c" class="toggle"  />
    <label for="section-32e0e2a16668b9d33b9df31ea5765d8c" class="flex justify-between">
      <a  class="">GPIO</a>
      <span>▾</span>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio-vii-display-siete-segmentos/" class="">Display Siete Segmentos VI.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio-vi-display-siete-segmentos/" class="">Display Siete Segmentos V.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio-v-display-siete-segmentos/" class="">Display Siete Segmentos IV.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio-iv-display-siete-segmentos/" class="">Display Siete Segmentos III.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio-iii-display-siete-segmentos/" class="">Display Siete Segmentos II.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio-ii-display-siete-segmentos/" class="">Display Siete Segmentos I.</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://eleckia.000webhostapp.com/docs/perifericos/gpio/perifericos-atmega328p-puertos-de-entrada-salida-de-proposito-general-gpio/" class="">Periféricos atmega328p.- Puertos de entrada/salida de propósito general (GPIO) I.</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Programando Avr en C.- Hola mundo</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents"></nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><p>Antes de analizar el código Blink en C, explicaremos la estructura básica de un programa en C, el siguiente código muestra un programa mínimo</p>
<pre><code>#include&lt;bibliotecas.h&gt;                                                         
                                                                                   
int main(void)                                                                     
{                                                                                  
        tipo1 variable1;                                                           
        tipo\_n variable\_n;                                                         
                                                                                   
        while(1){                                                                  
                hacer\_cosas(var1, var2, varn);                                     
        }                                                                       
        return 0;                                                               
}        
</code></pre><p>Al inicio de este listado tenemos una directiva del preprocesador, las directivas comienzan con un <strong>#</strong>, en este caso tenemos una directiva include, que le indica al compilador que copie el contenido del fichero bibliotecas.h en nuestro código, esto nos habilita a usar los objetos y funciones que hay dentro de bibliotecas.h, existen diferentes directivas que nos ayudaran a tener un código más limpio, es importante no subestimar al preprocesador, pues nos ayudara a hacer cosas que no pueden hacerse de otra forma.</p>
<p>Posteriormente tenemos la función main, la función main es un ente importante, cuando el programa se ejecuta, la función main es llamada automáticamente, es decir el código dentro de las llaves se ejecutara linea por línea, lo que esté fuera de dicha función deberá ser llamado explícitamente para poder ejecutarse. Por definición la función main retorna un entero al finalizar y en el caso de microcontroladores no suele recibir argumentos por eso la palabra void(más adelante analizaremos la estructura de las funciones), una vez llamada la función main, se comienzan a ejecutar cada uno de las líneas dentro de ella en orden descendente, en este caso declaramos dos variables de cierto tipo, variable_1 y variable_n.</p>
<p>Posteriormente hay una parte importante una estructura de flujo <strong>while</strong>, mantiene en ejecución el código que contiene mientras la condición que esta entre paréntesis se mantenga verdadera, un 1 siempre es verdadero por lo tanto esto se considera un ciclo infinito, es decir el código dentro del while se ejecutara constantemente, cuando llegue a la última línea saltara a la primera dentro sus llaves.</p>
<p>Finalmente tenemos un retorno, como nuestro programa se queda &ldquo;ciclado&rdquo; dentro del while, nunca alcanzaremos esta línea, sin embargo es conveniente poner esta línea o el compilador nos dará un warning o advertencia.</p>
<p>Ya estamos un poco más familiarizados con la estructura del programa, ahora si analicemos el programa Blink,</p>
<pre><code>#include&lt;avr/io.h&gt;                                                                 
#include&lt;util/delay.h&gt;
 
int main(void)                                                                     
{                                                                                  
        DDRB = 1 &lt;&lt; PB5;                                                           
        PORTB = 0;                                                                 
                                                                                    
        while(1){                                                               
                PORTB = 1 &lt;&lt; PB5;                                              
                \_delay\_ms(1000);                                                
                PORTB = 0;                                             
                \_delay\_ms(1000);                                                
        } 
        return 0;                                                                      
}
</code></pre><p>Al inicio tenemos dos directivas include, la primera io.h, nos permite acceder a los registros de los puertos de nuestro microcontrolador, en este caso el puerto B, haré una entrada especifica para este tema, la segunda delay.h nos permite usar la función _delay_ms, que como deducirás nos permite crear un tiempo muerto.</p>
<p>Iniciamos con la función main y lo primero que tenemos es una asignación, te preguntaras que es DDRB, para entenderlo primero debo explicar que es un registro y lo explicare en una entrada dedicada, por ahora vamos a decir que DDRB es una variable a secas, a esta variable le asignamos el resultado de una operación 1&laquo;PB5, el símbolo &ldquo;&laquo;&rdquo; es un operado binario llamado left shift o corrimiento a la izquierda, indica que el número a la izquierda sera recorrido el número de veces que tiene a la derecha en binario, por ejemplo</p>
<pre><code>3 en binario es 0b0011
3&lt;&lt;1 es en binario 0b0011&lt;&lt;1 y da como resultado 0b0 0110 en decimal 6
3&lt;&lt;2 es en binario 0b0011&lt;&lt;2 y da como resultado 0b0 1100 en decimal 12
3&lt;&lt;3 es en binario 0b0011&lt;&lt;3 y da como resultado 0b1 1000 en decimal 24
</code></pre><p>en nuestro caso casi siempre, solo usaremos un 1 a la izquierda del operador, por lo tanto</p>
<pre><code>1 en binario es 0b1
1&lt;&lt;1 da como resultado     0b10
1&lt;&lt;2 da como resultado    0b100
1&lt;&lt;3 da como resultado   0b1000
1&lt;&lt;7 da como result. 0b10000000
//bit                  76543210
//Posición             87654321
</code></pre><p>realmente no nos interesa el valor en decimal, lo que nos interesa es donde queda posicionado el 1, al final de la operación con 1&laquo;2, el 1 queda posicionado en la tercera de derecha a izquierda, con 1&laquo;7, queda en la octava de derecha a izquierda.</p>
<p>¿Para que es esto?, DDRB es una &ldquo;variable&rdquo; que le indica al microcontrolador si el pin es de entrada o de salida, si el bit es cero el pin operara como entrada, de lo contrario opera como salida. DDRB contiene 8 bits y cada bit corresponde a un pin de nuestro microcontrolador, al inicio contiene el valor binario 0b0000 0000, cuando revisas la hoja de datos de tu microcontrolador te darás cuenta que los pines están rotulados con las leyendas PA0, PB0, PC0, PA1, etc, estos son los &ldquo;nombres&rdquo; de los pines, A,B,C, es el puerto al que pertenecen, por lo tanto el pin 5 del puerto B es PB5.</p>
<p>El pin PB5 esta conectado al led de nuestra tarjeta, hay que decirle a DDRB que ponga el pin 5 como salida, tan fácil como</p>
<pre><code>DDRB = 1&lt;&lt;PB5;
//que es exactamente igual a
DDRB = 0b00100000;
//bit    76543210
</code></pre><p>Seguimos adelante y tenemos otra asignación, PORTB es otro registro, de igual forma asumiremos por ahora que es una variable, controla el estado del pin, el estado puede ser 0 para bajo o 1 para alto, en síntesis cuando el pin se configura en alto tendrá 5 volts y cuando se configura en bajo tendrá 0 volts, cuando necesitemos encender el led lo configuramos como alto con</p>
<pre><code>PORTB = 1&lt;&lt;PB5;
//que es exactamente igual a
PORTB = 0b00100000;
</code></pre><p>¿y si queremos ponerlo en bajo?, por ahora solo esto,</p>
<pre><code>PORTB = 0; //que es idéntico a
PORTB = 0b00000000;
</code></pre><p>esto tiene el pequeño inconveniente de poner el resto de pines en bajo y es muy probable que nuestro colega que este usándolos se enoje con nosotros, más adelante encontraremos una mejor manera.</p>
<p>Siguiendo con el programa, entramos al ciclo infinito en donde la parte interesante es la función _delay_ms(), la función se explica por si misma, cuando se llama toma el control de la ejecución del programa y espera la cantidad de tiempo indicada en milisegundos, en este caso 1000 que equivale a un segundo.</p>
<p>El programa se queda en este bucle encendiendo y apagando el led cada dos segundos. La última línea no se ejecuta pues el ciclo no se interrumpe.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents"></nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












